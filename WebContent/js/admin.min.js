function loadLastToolIfAny(t,a){var e=sessionStorage.getItem("lastToolURI"),i=null==e,o=0==a.filter("[data-admin-tool-url='"+e+"']").length;(i||o)&&(e=a.filter(":first").data("admin-tool-url"));var n=$.get(e);n.done(function(i){a.removeClass("active"),a.filter("[data-admin-tool-url='"+e+"']").addClass("active"),t.empty().html(i)})}function reloadCurrentAdminTool(t,a,e){var i=t.filter(".active").data("admin-tool-url"),o=$.get(i);o.done(function(t){a.empty().html(t);var i=void 0!=e;i&&displayNewAdminToolSuccess(e)})}function initializeDatepicker(t){t=$(".standard-date-picker-container > .input-group.date").datepicker({weekStart:0,format:"mm/dd/yyyy",daysOfWeekDisabled:"1,2,3,4,5,6",todayHighlight:!0,autoclose:!0});var a=new Date,e=new DateUtil(a).getStartOfWeek();t.datepicker("update",e)}function reinitializeDatepicker(t,a){t.datepicker("remove"),t.find("input").val("");var e="months"==a,i="years"==a,o="mm/dd/yyyy";e&&(o="mm/yyyy"),i&&(o="yyyy"),t.datepicker({minViewMode:a,format:o,weekStart:0,daysOfWeekDisabled:"1,2,3,4,5,6",todayHighlight:!0,autoclose:!0}),t.datepicker("update",new Date)}function initializeAdminToolDataTable(t,a,e){t.dataTable({paging:!0,pageLength:10,pagingType:"simple",order:[a],stateSave:!0,searching:e})}function initializePrivlegesDataTable(t){t.dataTable({paging:!0,pageLength:10,pagingType:"simple",stateSave:!0,drawCallback:function(t){if(t.bSorted||t.bFiltered)for(var a=0,e=t.aiDisplay.length;e>a;a++)$("td:eq(0)",t.aoData[t.aiDisplay[a]].nTr).html(a+1)}})}function initializeCallerAttendanceDataTable(t,a,e,i){t.dataTable({paging:!0,pageLength:10,pagingType:"simple",order:[a],stateSave:!0,searching:e,columns:[{"class":"text-center"},{"class":"text-center"},{"class":"text-center"}],drawCallback:function(t){if(i&&(t.bSorted||t.bFiltered))for(var a=0,e=t.aiDisplay.length;e>a;a++)$("td:eq(0)",t.aoData[t.aiDisplay[a]].nTr).html(a+1)}})}function submitAttendanceForm(t,a,e){var i=e.data("attendance-form-submit"),o=e.DataTable(),n=$.get(i,{startTime:t,endTime:a});n.done(function(t){o.clear(),$.each(t,function(t,a){var e=a.nickname,i=a.points;o.row.add(["",e,i])}),o.draw()})}function displayNewAdminToolSuccess(t){var a=$("#row-alert"),e=$("#success-alert"),i=e.clone();i.find(".alert-text").html(t+" "),a.append(i.fadeIn())}$(document).ready(function(){var t=$("#admin-large-modal"),a=$("#admin-small-modal"),e=$(".modal-admin"),i=t.find(".modal-content"),o=a.find(".modal-content"),n=$(".admin-sidebar-link"),l=$("#admin-tool-container");loadLastToolIfAny(l,n),l.on("click",".btn-large-modal",function(){var a=$(this).data("modal-url"),e=$.get(a);e.done(function(a){i.empty().html(a),t.modal()})}),l.on("click",".btn-small-modal",function(){var t=$(this).data("modal-url"),e=$.get(t);e.done(function(t){o.empty().html(t),a.modal()})}),l.on("click",".btn-tool-form-submit",function(){var t=$(this),a=t.closest("form"),e=a.data("form-submit-url"),i=!validateInputs(a);if(!i){var o=$.post(e,a.serialize());o.done(function(){var t=a.data("success-text");displayNewAdminToolSuccess(t)})}}),e.on("click",".btn-modal-form-submit",function(){var e=$(this),i=e.closest(".modal-content").find("form"),o=i.data("form-submit-url"),r=!validateInputs(i);if(!r){var s=$.post(o,i.serialize());s.done(function(){var t=void 0!=e.data("page-refresh"),a=i.data("success-text");t?reloadCurrentAdminTool(n,l,a):displayNewAdminToolSuccess(a)}).always(function(){t.modal("hide"),a.modal("hide")})}}),n.on("click",function(){var t=$(this),a=t.data("admin-tool-url");sessionStorage.setItem("lastToolURI",a),sessionStorage.setItem("link",t);var e=$.get(a);e.done(function(a){n.removeClass("active"),t.addClass("active"),l.empty().html(a)})})});