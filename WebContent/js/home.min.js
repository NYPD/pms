function initializePayoutHistoryTable(){$("#payout-history-table").dataTable({paging:!0,pagingType:"simple_numbers",columnDefs:[{searchable:!1,targets:1}],stateSave:!0,order:[[3,"desc"]],drawCallback:function(t){if(t.bSorted||t.bFiltered)for(var e=0,a=t.aiDisplay.length;a>e;e++)$("td:eq(0)",t.aoData[t.aiDisplay[e]].nTr).html(e+1)}})}function initializePayoutChart(){$("#payout-history-highchart").highcharts({chart:{type:"column",height:300},title:{align:"center"},xAxis:{categories:["Jan.","Feb.","Mar.","Apr.","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."]},yAxis:{allowDecimals:!1,title:{text:"Payout Amount"}},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b><br/>",valueSuffix:" gold"},colors:["rgba(252, 222, 108, 1)"],legend:{enabled:!1},plotOptions:{series:{allowPointSelect:!1,borderWidth:2,borderColor:"rgba(225, 184, 79, 1)"}},series:[{name:"Amount",data:[]}]})}function formatBattleAndEventTimes(){$(".battle-info > .map-info .battle-time").each(function(){var t=$(this),e=t.html(),a=covertUnixEpochToLocalizedTime(e);t.html(a)}),$(".battle-info > .map-info .event-time").each(function(){var t=$(this),e=t.html(),a=covertMillisToLocalizedTime(e);t.html(a)})}function formatPayoutHistoryTable(){$("#payout-history-table .payout-date").each(function(){var t=$(this),e=t.text(),a=covertUnixEpochToLocalizedDate(e);t.html(a)}),$("#payout-history-table .payout-amount").each(function(){var t=$(this),e=+t.text(),a=e.toLocaleString();t.html(a)})}$(document).ready(function(){highlightNavButton("#home"),formatPayoutHistoryTable(),formatBattleAndEventTimes(),initializePayoutHistoryTable(),initializePayoutChart();var t=$(".check-in-button"),e=$(".btn-replay-upload"),a=$("#replay-input-file"),o=$(".replay-upload"),i=$(".highchart-year-selection"),n=$("#check-in-error-modal");t.on("click",function(){t.button("loading"),setTimeout(function(){var e=$.ajax({url:"../app/check-in",global:!1,error:function(e){var a=e.responseText;n.find(".modal-body p").html(a),n.modal("show"),t.button("reset")}});e.done(function(){t.removeClass("btn-primary"),t.addClass("btn-success"),t.button("complete")})},500)}),a.on("change",function(){var t=$(this).val(),i=t;if(i){var n=t.lastIndexOf("wotreplay")===t.length-9;n?(e.removeClass("disabled"),o.removeClass("replay-file-error"),a.tooltip("destroy")):(e.addClass("disabled"),o.addClass("replay-file-error"),a.tooltip("show"))}}),i.on("change",function(){var t=$(this).val(),e=new Date;e.setFullYear(t);var a=new DateUtil(e),o=a.getStartOfYear().getTime(),i=a.getEndOfYear().getTime(),n=$.get("../app/get-updated-highchart-information",{startTime:o,endTime:i});n.done(function(e){var a=t+" Monthly Gold Payouts",o=e,i=$("#payout-history-highchart").highcharts();i.setTitle({text:a}),i.series[0].remove(),i.addSeries({name:"Amount",data:o})})}),i.change()});